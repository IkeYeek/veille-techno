<template>
  <div id="asmjs" ref="asmjs">
    <div class="spacer"></div>
    <h2>Lorem Ipsum Dolor Sit Amet</h2>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent eleifend finibus urna nec ultricies. Sed quis orci enim. Cras ut diam vitae orci bibendum tristique. Curabitur in sem ut massa convallis hendrerit non id magna. Donec egestas tortor vitae rutrum porttitor. Sed vestibulum ipsum a lorem convallis, sit amet sollicitudin enim dignissim. Nulla accumsan mauris ac nunc condimentum elementum. Nam sit amet erat sollicitudin, aliquet urna et, congue est. In tincidunt sit amet ipsum in accumsan. Quisque commodo lacus sed enim malesuada, eu vestibulum ipsum dictum. Sed a dui ornare, condimentum odio id, fermentum mi. Sed lacus ex, convallis a elementum et, vulputate sed diam.

      Integer efficitur rhoncus magna sed venenatis. Cras vestibulum nisi mauris, quis cursus nisl porttitor non. Suspendisse condimentum ultrices erat, id elementum arcu egestas eu. Proin nec mi at nunc faucibus eleifend non sed mi. Praesent justo elit, ultricies non fermentum quis, semper porttitor mi. Integer fermentum, turpis eget fringilla mollis, ipsum est semper ex, non blandit lacus tellus ac tellus. Vestibulum sed gravida ligula, quis sagittis leo. Donec facilisis iaculis eros ut cursus.

      Pellentesque sit amet varius mauris. Quisque bibendum sagittis diam sed posuere. Vestibulum mattis, urna placerat varius sollicitudin, eros arcu interdum eros, eu tristique elit augue vitae dolor. Maecenas venenatis odio in malesuada blandit. Maecenas id iaculis leo. Vestibulum in sollicitudin eros, sed pharetra dui. In aliquam rutrum nibh, in pharetra ligula porttitor eu.

      Nam vulputate urna in ante condimentum lacinia. Donec varius ullamcorper sem, nec efficitur lacus rutrum quis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Sed tempor lobortis dui et imperdiet. Aenean et odio eros. Ut facilisis nunc nisi, a molestie dolor cursus a. Nullam dignissim ligula sed posuere scelerisque. Etiam orci libero, sodales id auctor quis, egestas ac felis. Phasellus massa massa, iaculis molestie venenatis sit amet, rutrum vel libero. Phasellus non efficitur neque, ut rhoncus nulla. Vivamus tristique quis magna vitae mattis. Donec interdum est a purus molestie, at posuere est pellentesque. Ut ultricies leo sit amet ex scelerisque tincidunt. Ut purus erat, pharetra sed interdum non, hendrerit vitae purus. Fusce urna tortor, ullamcorper sit amet diam ac, convallis congue libero. Integer vitae mauris risus.

      Nam varius odio sed magna ullamcorper ullamcorper. Fusce eleifend purus quis nibh condimentum, quis vulputate ex rhoncus. Proin sagittis scelerisque convallis. In turpis urna, tempor non suscipit at, efficitur sed lorem. Duis vel porttitor enim, vel vulputate arcu. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nunc iaculis placerat libero, eu laoreet lorem consequat non. Proin at risus in nunc vulputate hendrerit. Morbi at gravida mauris. Donec vitae dictum purus, a maximus nisl. Maecenas at pulvinar ligula. Vivamus commodo efficitur lorem, ut auctor eros condimentum ac. Mauris sit amet nisl id justo elementum dictum. Suspendisse maximus libero in lectus tempus finibus. In in risus tincidunt est posuere vulputate eget sit amet mi. Ut pulvinar diam sem, vel hendrerit massa sollicitudin sit amet.

      Proin libero nisi, sodales ut velit vitae, auctor maximus lacus. Ut et porta nibh. Phasellus luctus pretium pulvinar. Nulla facilisi. Donec maximus arcu metus, sit amet tempor ante facilisis non. Nunc nisi metus, suscipit sed sagittis a, tincidunt ac urna. Duis efficitur leo pretium dictum vulputate. Nullam ut felis sit amet nisi tempor sagittis. Vestibulum eget enim auctor, ullamcorper orci sit amet, facilisis neque. Nunc in accumsan orci. Quisque tincidunt lectus nibh, vitae tincidunt nisl ornare a. Integer a lorem et augue ultrices dapibus in vel diam.

      Mauris scelerisque eget diam id lacinia. Aenean malesuada augue non laoreet ornare. Proin augue enim, euismod in bibendum quis, aliquet et arcu. Donec et iaculis felis, non accumsan nibh. Nam rhoncus volutpat sagittis. Nullam ultricies fringilla tellus nec volutpat. Integer cursus enim id faucibus pulvinar. In libero nisi, molestie efficitur molestie et, feugiat quis risus. Sed vel nisi volutpat, auctor tellus non, tempus est. Aenean sollicitudin ut erat sit amet condimentum. Morbi non enim sollicitudin, dictum felis quis, auctor lectus.

      Suspendisse feugiat tempor ante sit amet egestas. Cras vestibulum ante ut dui venenatis, non eleifend nulla aliquet. Cras a quam quis tortor blandit sagittis. Vestibulum lorem neque, fermentum vitae feugiat molestie, pretium at lacus. In sit amet diam lectus. Proin convallis consectetur hendrerit. In hac habitasse platea dictumst. Morbi dignissim nisi a turpis tincidunt tincidunt. Morbi consectetur, enim quis varius rhoncus, sem purus sollicitudin justo, eu volutpat lorem felis ut lacus. Cras faucibus nibh sed lacus varius, tempus dictum leo gravida. Nunc varius feugiat ipsum ut aliquet. Morbi varius nisl metus, sit amet pellentesque lacus pellentesque vel. Aliquam non metus lacus. Fusce et nibh tincidunt, auctor enim vel, lacinia odio. Etiam pellentesque massa at neque egestas, lacinia pulvinar diam auctor.

      Sed eleifend iaculis laoreet. Pellentesque aliquet nisl eget velit varius, a pharetra purus molestie. Aliquam tincidunt pulvinar viverra. Maecenas facilisis mattis nulla, ac euismod ex ultrices ut. Etiam egestas ante faucibus ornare condimentum. Aenean eu quam auctor, suscipit ante sit amet, bibendum nulla. Curabitur sit amet purus congue, euismod lacus ut, venenatis lacus. Aenean imperdiet lorem sed bibendum feugiat. Aenean vel accumsan tellus.

      Donec et erat erat. Sed eu congue est, at dignissim nisl. Vivamus urna massa, rhoncus in malesuada nec, varius eget tellus. Curabitur eu leo a magna malesuada facilisis. Integer interdum justo tellus. Sed sagittis sit amet nisi a tincidunt. Proin pharetra efficitur aliquam. Morbi dignissim tortor justo, ac maximus risus egestas eu. Nullam in nisl maximus, laoreet purus ut, suscipit mi. Phasellus pellentesque eros at massa tincidunt, et sagittis ligula congue. Curabitur eu faucibus quam, in dignissim mi.

      In mattis turpis dolor, eget interdum nibh tincidunt et. Mauris hendrerit cursus ipsum, non condimentum massa sagittis vel. Praesent sodales urna odio, eget maximus justo dignissim ut. Phasellus malesuada placerat eros, eu interdum enim bibendum id. Aenean consequat tincidunt est nec placerat. Phasellus laoreet tempor consequat. Vivamus a feugiat turpis. Proin tincidunt accumsan laoreet. Vestibulum vel eros at magna lobortis mollis. Quisque vitae mauris ac magna tempus vulputate sed nec erat. Sed posuere laoreet dui, nec eleifend lorem vestibulum vel. Pellentesque maximus viverra mi, in ultrices mauris dapibus sit amet. Cras nulla risus, pretium in laoreet eu, mattis a nulla.

      Ut sollicitudin euismod metus id porttitor. Nulla laoreet est sed auctor tempor. Phasellus bibendum orci vitae sapien ultricies porta. Nam et sodales erat. Ut tincidunt vitae libero et auctor. Nulla at vehicula ipsum. Curabitur ultricies rhoncus orci, ac varius lorem tincidunt ut.

      Vivamus ut dapibus ante. Maecenas rhoncus massa nisi, id tincidunt nunc cursus at. Nunc finibus sapien id leo tempor ornare. Mauris feugiat nisl ut finibus semper. Nam venenatis vel elit in efficitur. Nam porttitor diam a ipsum tempor dapibus id eu elit. Fusce blandit nisl sed fermentum malesuada. Nunc eu est pulvinar, placerat erat eget, sollicitudin urna. Suspendisse potenti. Donec et imperdiet est. Ut ac neque eleifend, sodales augue ut, fermentum felis.

      Integer viverra, sem sit amet tincidunt feugiat, massa erat faucibus arcu, at blandit felis felis ut sapien. In eu aliquet odio. In vestibulum vitae nisi quis hendrerit. In suscipit magna eget risus convallis malesuada. Sed placerat consequat fringilla. Donec et massa turpis. Cras pretium tempor mi. Integer convallis magna nunc, scelerisque laoreet orci mollis et. Nam interdum dui vel sapien venenatis faucibus.

      Morbi ipsum quam, vehicula vel lectus vel, molestie pellentesque lorem. Sed ut cursus urna. Aenean id vehicula ex, eu porta tellus. Praesent orci mi, viverra a leo a, consectetur semper nulla. Ut quis luctus nibh. Maecenas fermentum odio eu rhoncus interdum. Integer vel auctor libero. Vestibulum enim leo, varius eu dui at, luctus sagittis erat. Donec risus magna, tempus eleifend facilisis a, consequat ut nunc.

      Praesent a dapibus tellus. Mauris pharetra iaculis neque. Aenean sem libero, mollis sit amet ipsum sed, molestie tristique enim. Suspendisse malesuada nisi sapien, sit amet vestibulum tellus aliquet non. Duis gravida ipsum vel velit dignissim lacinia. Maecenas a est et lorem iaculis euismod. Aenean et sapien sit amet nisl laoreet condimentum. Duis sit amet sem ut magna viverra auctor vel non tellus. Morbi at iaculis enim. Nunc pellentesque justo sed augue mollis pellentesque. Etiam dictum magna in lobortis condimentum. Duis facilisis, dolor eget vestibulum pulvinar, felis nulla gravida enim, non cursus erat erat in purus.

      Etiam sit amet velit eu nulla faucibus efficitur id ut tortor. Phasellus vitae tincidunt diam. Nunc risus libero, consequat tristique dignissim sit amet, laoreet a nibh. Duis iaculis ultricies maximus. Integer ullamcorper scelerisque ante, non feugiat quam viverra nec. Nunc at tellus magna. Nunc volutpat pulvinar dui ut rutrum. Suspendisse viverra venenatis ultricies. Vivamus venenatis justo nulla, nec rutrum tellus convallis id. Mauris aliquet nec risus eu lobortis. Cras consectetur sollicitudin massa in pellentesque.

      Pellentesque ut condimentum est, ac euismod diam. Aenean gravida luctus egestas. Phasellus in elementum nibh. Sed ac lorem vitae orci volutpat hendrerit. Phasellus ut volutpat leo, quis sollicitudin nunc. Nulla quis tristique diam. Sed ultricies mauris eu nulla fermentum pellentesque. Integer sed leo purus. Integer consectetur arcu sed suscipit mattis.

      Vestibulum luctus pellentesque quam, id vestibulum ligula imperdiet vitae. Vestibulum et nisl vel est molestie vestibulum. Morbi maximus, erat eu vehicula vestibulum, dolor lacus suscipit felis, id finibus leo ex eget orci. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Curabitur ultricies justo nulla, in euismod sem consectetur eu. Ut cursus libero sit amet diam congue vestibulum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Quisque vel nunc ex. Vivamus enim ex, dapibus ac libero placerat, hendrerit tincidunt nibh. Donec blandit tempus vehicula. Vestibulum fringilla scelerisque dui ac porttitor. Phasellus lorem orci, consectetur in tempus ac, fringilla eget lacus. Proin lacinia pulvinar massa vel suscipit. Pellentesque tortor eros, ullamcorper sit amet venenatis ut, sodales a justo. Nam a velit eget nunc consequat interdum eu nec urna. Morbi dictum mauris sit amet magna lobortis, id imperdiet justo posuere.

      Vestibulum et metus tempus, feugiat felis vitae, pulvinar ipsum. Aliquam sed placerat dolor. Donec eget lorem sapien. Donec sagittis vitae nibh in convallis. Curabitur rhoncus convallis vestibulum. In a placerat turpis. Integer fringilla sem aliquet turpis pulvinar dictum. Pellentesque convallis id sapien sagittis tincidunt. Aenean blandit at elit a posuere. In suscipit ipsum dictum neque tempor euismod. Donec nec orci varius, consectetur tellus et, vestibulum diam. Curabitur sollicitudin rutrum condimentum. Etiam vitae orci ac erat auctor tincidunt.

      Aenean vitae laoreet ex, a volutpat massa. Etiam consectetur dictum mi, in tincidunt dolor accumsan sit amet. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Mauris vel scelerisque nisi, ac feugiat enim. Aenean a justo vel diam congue dignissim eget et magna. Nunc hendrerit a nunc lacinia mattis. Interdum et malesuada fames ac ante ipsum primis in faucibus. Donec suscipit turpis at est auctor tincidunt. Aenean fringilla scelerisque eros a consequat. Donec suscipit eu lorem sed tristique. In ut eleifend libero. Sed ligula tortor, volutpat ut venenatis id, sagittis ut dui. Ut egestas mollis dignissim. Phasellus sodales magna non lectus elementum mollis. Duis mi purus, semper id dapibus fermentum, ultricies sed nisl. In in ipsum ipsum.

      Etiam eu urna orci. Curabitur maximus augue sit amet tortor suscipit, et scelerisque odio finibus. Curabitur quis laoreet erat. Vivamus tellus elit, laoreet vel mauris nec, porttitor varius neque. Nulla sodales felis et euismod feugiat. Vestibulum non cursus arcu, a sodales est. Etiam pulvinar lectus commodo tellus congue vulputate vitae nec ante. Pellentesque convallis mollis metus id dictum. Etiam nec ultricies eros. Praesent porta pulvinar venenatis. Suspendisse scelerisque quis massa et interdum.

      Pellentesque et facilisis nibh. Vestibulum auctor nibh sit amet elit pharetra, eu vehicula dui porttitor. In facilisis porttitor rutrum. Nulla et turpis ligula. Duis dictum facilisis purus, vitae cursus nunc. Curabitur tempor sapien id aliquet vulputate. Aenean hendrerit elit in nulla dictum, id ullamcorper est aliquet. Vivamus ac purus fermentum lorem venenatis commodo ut quis arcu. Donec suscipit nulla neque, porttitor scelerisque metus suscipit ac. Nulla at orci mauris.

      Praesent sollicitudin libero ut augue tempus viverra. In neque nunc, elementum vel lobortis at, gravida nec erat. Phasellus dui nunc, vestibulum vel massa interdum, ullamcorper faucibus sapien. Integer finibus pulvinar quam eu rhoncus. Curabitur lacinia lectus erat, venenatis lobortis lorem viverra molestie. Fusce arcu lacus, efficitur vel neque vulputate, lobortis euismod lorem. Praesent sed nunc cursus, sagittis justo id, iaculis nibh.

      Mauris sodales dui ut rhoncus mollis. In in nibh tortor. Praesent augue est, venenatis quis mauris ullamcorper, dapibus volutpat sem. Maecenas vel ullamcorper arcu, eget lobortis nibh. Curabitur ullamcorper arcu blandit, consequat libero vitae, vestibulum quam. Donec laoreet, urna ac molestie facilisis, mauris leo sagittis odio, ullamcorper elementum turpis nibh ut sapien. Curabitur eu sagittis ipsum, non placerat ante. Etiam eget mattis erat. Nulla gravida mauris leo, vel posuere augue pulvinar malesuada. Aliquam ac cursus massa, eget fermentum quam. Nam elementum ipsum non magna aliquet euismod. Suspendisse dapibus dignissim quam tristique porta.

      Donec pretium feugiat massa, nec pellentesque dui efficitur non. Suspendisse efficitur ac tellus id blandit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut ac suscipit dui. Praesent eget consequat nibh. Maecenas malesuada erat at risus laoreet aliquet sed ut urna. Nam finibus ex tortor, feugiat tempor mauris finibus vel. Aliquam malesuada congue porttitor. Duis vitae diam lectus. Vivamus ultrices luctus ligula, non interdum dui rutrum sed.

      Nam pretium euismod eros, eget finibus lorem eleifend nec. Vivamus ultricies porttitor elit, ut luctus lectus ullamcorper in. Nam ornare lorem justo, ac porttitor lorem mollis fringilla. Cras gravida elit magna, at tristique sem varius ut. Aliquam auctor turpis sit amet turpis rutrum, laoreet lacinia eros venenatis. Phasellus neque ipsum, feugiat nec ligula a, rutrum feugiat mi. In hac habitasse platea dictumst. Cras efficitur dictum diam, lacinia faucibus sapien pellentesque ut. Duis vitae urna ut velit aliquet consequat vel vitae risus. Fusce non tristique enim, consectetur ornare risus.

      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec eros felis, finibus sit amet bibendum at, luctus vel odio. Nullam ornare enim justo, fringilla egestas tortor ultrices eget. Proin id nibh purus. Proin nulla sapien, bibendum vitae mattis hendrerit, maximus vitae ligula. Duis iaculis aliquam orci ut vehicula. Etiam viverra rutrum nulla in porttitor. Donec bibendum mi vel sapien auctor, ac auctor leo tristique. Aenean auctor nulla a magna luctus euismod. Nunc eget lectus ligula. Curabitur viverra erat at interdum feugiat. Duis commodo malesuada lectus ac iaculis. Nulla non nisl nec nibh consequat mattis vel sed tortor. Nullam dolor dui, interdum dapibus massa vitae, consequat pretium odio. Sed condimentum ligula quam, eget tincidunt ex rutrum nec.

      Proin eget justo sit amet velit luctus auctor. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean faucibus sagittis elementum. Aenean ut massa vel sapien aliquet dapibus. Etiam non eros ac ante ultricies consectetur in fermentum orci. Fusce non mollis purus. Integer imperdiet augue quis elit iaculis sollicitudin. Mauris facilisis ac felis at varius. Nulla sagittis dictum varius. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Ut at tincidunt eros, at feugiat mauris. Maecenas turpis est, dictum at est ut, sodales semper mauris. In ornare, metus sed maximus cursus, tellus ligula vehicula augue, vitae congue massa lectus ut mi. Morbi lorem metus, pulvinar et dui sollicitudin, varius convallis eros. Mauris vestibulum ullamcorper eros.

      Nulla pulvinar massa euismod urna dictum, vitae euismod turpis gravida. Phasellus vestibulum pellentesque nisl non mollis. Integer feugiat tellus at libero luctus porta. Suspendisse rutrum non nisi ut cursus. Phasellus cursus mollis commodo. Cras semper ultricies auctor. Aenean lobortis, est ac venenatis lacinia, purus ex venenatis felis, eu tincidunt ligula dui quis sapien. Interdum et malesuada fames ac ante ipsum primis in faucibus.
    </p>
    <div class="spacer"></div>
  </div>
</template>

<script setup lang="ts">
import { onMounted, ref } from "vue";
import { useUiStore } from "@/stores/ui";
const ui = useUiStore();
const js = ref(null)
onMounted(() => {
  let lastScrollTop = 0;
  let last0Hit = null;
  let lastEndHit = null;
  const element = document.getElementById("asmjs")
  element.onwheel = (e) => {
    if (e.deltaY < 0 && element.scrollTop == 0) {
      lastEndHit = null;
      const currTime = Date.now();
      if (last0Hit == null) {
        last0Hit = Date.now();
      } else {
        if (currTime > last0Hit + 250) {
          ui.goToLastSection(1);
        }
      }
    } else if(e.deltaY > 0) {
      if (element.scrollTop < lastScrollTop){
        return;
      }
      last0Hit = null;
      lastScrollTop = element.scrollTop <= 0 ? 0 : element.scrollTop;
      if (element.scrollTop + element.offsetHeight + 1>= element.scrollHeight ){
        if (lastEndHit === null)
          lastEndHit = Date.now();
        else if (Date.now() > lastEndHit + 250)
          ui.goToNextSection(1);
      }
    }
  }
});
</script>

<style scoped>
.spacer {
  height: 8vh;
}
#asmjs {
  background-color: var(--third-color);
  color: var(--vt-c-black-soft);
  height: 100vh;
  width: 100vw;
  overflow-y: scroll;
  padding: 2rem;
}
</style>